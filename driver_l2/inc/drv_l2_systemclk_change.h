#ifndef __DRV_L2_SYSTEMCLK_CHANGE_H__
#define __DRV_L2_SYSTEMCLK_CHANGE_H__


#include "typedef.h"

#define FAIL         -1
#define SUCCESS       0
#define C_MIN_PLL    27

typedef struct ddr_parameter_s
{
    INT32U ddr_timing1;
    INT32U ddr_timing2;
    INT32U ddr_tref;
    INT32U ddr_init_v;
}ddr_parameter_t;

INT32S drv_l2_change_system_speed(int systempll)__attribute__((section(".isys_set")));
void drv_l2_ddr_to_self_refresh(void)__attribute__((section(".isys_set")));
void drv_l2_ddr_calibration(int systempll_index, ddr_parameter_t*)__attribute__((section(".isys_set")));

static const ddr_parameter_t ddr_init_table[] =
{
    //27 0
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    //63MHz 4
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    {0x00000000, 0x00000000, 0x00000000, 0x00000000},
    //pll = 108MHz 9
    {0x32040003, 0x00C811A5, 0x000001A5, 0x00002A2F},
    {0x32040004, 0x00C811C8, 0x000001C8, 0x00002DB3},
    {0x32040004, 0x00C811EB, 0x000001EB, 0x00003137},
    {0x32141124, 0x00C8120E, 0x0000020E, 0x000034BB},
    {0x32141125, 0x00C81231, 0x00000231, 0x0000383F},
    //153  14
    {0x32141125, 0x00C81254, 0x00000254, 0x00003BC3},
    {0x32141125, 0x00C81277, 0x00000277, 0x00003F47},
    {0x32141125, 0x00C8129A, 0x0000029A, 0x000042CB},
    {0x32141126, 0x00C812BD, 0x000002BD, 0x0000464F},
    {0x32141126, 0x00C812E1, 0x000002E1, 0x000049D3},
    //198  19
    {0x32141126, 0x00C81304, 0x00000304, 0x00004D57},
    {0x32141127, 0x00C82327, 0x00000327, 0x000050DB},
    {0x32141127, 0x00C8234A, 0x0000034A, 0x0000545F},
    {0x32141127, 0x00C8236D, 0x0000036D, 0x000057E3},
    {0x32141128, 0x00C82390, 0x00000390, 0x00005B67},
    //243  24
    {0x32141128, 0x00C823B3, 0x000003B3, 0x00005EEB},
    {0x32141128, 0x00C823D6, 0x000003D6, 0x0000626F},
    {0x32141129, 0x00C823F9, 0x000003F9, 0x000065F3},
    {0x32242249, 0x00C8241C, 0x0000041C, 0x00006977},
    {0x32242249, 0x00C82440, 0x00000440, 0x00006CFB},
    //288  29
    {0x3224224A, 0x00C82463, 0x00000463, 0x0000707F},
    {0x3224224A, 0x00C82486, 0x00000486, 0x00007403},
    {0x3224224A, 0x00C824A9, 0x000004A9, 0x00007787},
    {0x3224224B, 0x00C824CC, 0x000004CC, 0x00007B0B},
    {0x3224224B, 0x00C824EF, 0x000004EF, 0x00007E8F},
    //333  34
    {0x3224224B, 0x00C82512, 0x00000512, 0x00008213},
    {0x3224224B, 0x00C82535, 0x00000535, 0x00008597},
    {0x3224224C, 0x00C82558, 0x00000558, 0x0000891B},
    {0x3224224C, 0x00C8257B, 0x0000057B, 0x00008C9F},
    {0x3224224C, 0x00C8259F, 0x0000059F, 0x00009023},
    //378 39
    {0x3224224D, 0x00C825C2, 0x000005C2, 0x000093A7},
    {0x3224224D, 0x00C825E5, 0x000005E5, 0x0000972B}

};


extern INT32S drv_l2_change_system_speed(int systempll);

#endif
